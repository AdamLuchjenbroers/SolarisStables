{% extends 'solaris_layout.tmpl' %}
{% load ledger %}
 
{% block pageheader %}
  {{ block.super }}
  <link rel="stylesheet" type="text/css" href="/static/css/ledger.css" />
  <script src="/static/js/stable_ledger.js" type="text/javascript" > </script>
  
{% endblock %}
 
{% block pagebody %}
<div class="body">
  <h1>{{stable.stable_name}} Finances, Week {{week.week_number}}</h1>
 
  <div id="stable-ledger">
   
  <div id="stable-ledger-header">
    <span class="ledger-desc">Opening Balance</span>
    <span class="ledger-value">{{opening_balance}}</span>
  </div>
  
  {% for group in ledger_groups %}
    <div class="ledger-subheader">
      <span class="ledger-desc">{{group.description}}</span>
      <span class="ledger-value" id="ledger-value-{{group.code | lower}}"> </span>
    </div>
    
    {% if group.entries %}{% for entry in group.entries %}
      {% if entry.item.tied %}
        <div class="ledger-item ledger-item-tied">
      {% else %}
        <div class="ledger-item ledger-item-edit">
      {% endif %}
          <div class="ledger-view-display">
            <span class="ledger-action"><input type="submit" class="icon-button ledger-edit" Value="&#x270E;" class="submit" tabindex="{{submit_tab}}"/></span>            
            <span class="ledger-desc"><p>{{entry.item.description}}</p></span>
            <span class="ledger-value"><p>{{entry.item.cost}}</p></span>
          </div>
      {% if not entry.item.tied %}
          {% ledger_edit_form entry.form %}
          {% ledger_delete entry.delete %}
      {% endif %}
        </div>
    {% endfor %}{% endif %}
     
    {% if group.form %}
    {% ledger_add_form group.form %}
    {% endif %}

    <div class="ledger-item ledger-item-summary" id="ledger-summary-{{group.code | lower}}">
      <span class="ledger-action"></span>
      <span class="ledger-desc">Total</span>
      <span class="ledger-value" id="ledger-sumvalue-{{group.code | lower}}"> </span>
    </div>
  {% endfor %}
 
  </div>  
</div>
{% endblock %}
